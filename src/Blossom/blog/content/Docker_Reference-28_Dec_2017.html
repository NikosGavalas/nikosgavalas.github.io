<!DOCTYPE html><html><head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<meta name="description" content="Nik's personal blog">
	<meta name="author" content="Nik Gavalas">
	<meta name="keywords" content="Software, Personal, Blog">

	<title>N.Gavalas</title>

	<!-- Bootstrap 4 -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

	<!-- Fonts -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="https://fonts.googleapis.com/css?family=Merriweather|Open+Sans" rel="stylesheet">

	<!-- Highlight.js -->
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css">

	<!-- Custom CSS -->
	<style>
		html {
			position: relative;
			min-height: 100%;
		}

		body {
			/* Margin bottom by footer height */
			margin-bottom: 60px;
		}

		.footer {
			position: absolute;
			bottom: 0;
			width: 100%;
			/* Set the fixed height of the footer here */
			height: 60px;
			/* Vertically center the text there */
			line-height: 60px;
			background-color: #f5f5f5;
		}

		body {
			font-family: 'Merriweather', serif;
			/* font-family: 'Open Sans', sans-serif; */
		}

		#content {
			margin-top: 25px;
		}

		.post-date {
			color: gray;
		}
	</style>
</head>

<body>

	<!-- Navbar -->
	<nav id="navBar" class="navbar navbar-expand-lg navbar-dark bg-dark">
		<div class="container">
			<a class="navbar-brand" href="/">/home/nik</a>
			
			<!-- Currently not used -->
			<!--
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
			 aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button> 

			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item">
						<a class="nav-link" href="/about">About</a>
					</li>
				</ul>
			</div>
			-->

			<a class="btn btn-dark" href="/blog.html" type="button">Blog</a>

		</div>
	</nav>

	<!-- Main Content -->
	<div id="content" class="container">
		<div class="row">
			<div class="col-md-2"></div>
			<div id="main" class="col-md-8">

			<p class="post-date">28 Dec 2017</p><h1 id="shortdockertutorial">Short Docker Tutorial</h1>
<p>Note about the notation: all the $&lt;…&gt; fields below are variables, used for demonstration.</p>
<h2 id="intro">Intro</h2>
<p><strong>TODO:</strong> explain what docker is how it works etc… <!-- see <a href="https://www.youtube.com/watch?v=YFl2mCHdv24&t=9s">this</a> to get ideas --></p>
<h2 id="images">Images</h2>
<p>List Images: <code>$ docker images</code></p>
<h3 id="dockerfile">Dockerfile</h3>
<p>Commands:</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Explanation</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>FROM $base_image:$tag</td>
<td>Select base image and tag to build upon (find base images at DockerHub).</td>
<td>FROM ubuntu:16.04</td>
</tr>
<tr>
<td>RUN $command</td>
<td>Runs a command on the image while building it (it is commited to the docker image). Often used to install packages.</td>
<td>RUN apt-get update</td>
</tr>
<tr>
<td>CMD ["$command"]</td>
<td>The command the container executes by default when you launch the built image. Only one CMD allowed per Dockerfile. The CMD can be overridden when starting a container with docker run $image $other_command</td>
<td>CMD ["/bin/bash"]</td>
</tr>
<tr>
<td>EXPOSE $port</td>
<td>Exposes a port to the host machine</td>
<td>EXPOSE 80</td>
</tr>
<tr>
<td>ENV $VAR_NAME $value</td>
<td>Sets environment variables inside the image</td>
<td>ENV LISTEN_PORT 8080</td>
</tr>
<tr>
<td>COPY $src $dest</td>
<td>Copy files from src path (host) to destination path (inside the image) while building it</td>
<td>COPY config/php.ini /usr/local/etc/php</td>
</tr>
</tbody>
</table>
<h3 id="examples">Examples</h3>
<h4 id="example1">Example 1</h4>
<pre><code class="docker language-docker"># FROM base_image:tag
FROM ubuntu:16.04

# Run command inside the container
RUN apt-get update
RUN apt-get install -y gcc
</code></pre>
<h4 id="example2">Example 2</h4>
<pre><code class="docker language-docker">FROM php:7.0-apache

# copy files from &lt;src dir&gt; to &lt;destination dir, inside the image&gt;
COPY config/php.ini /usr/local/etc/php
COPY src/ /var/www/html

# expose a port to the host machine
EXPOSE 80
</code></pre>
<p>Building an Image: <code>$ docker build $directory_containing_the_dockerfile</code></p>
<p>Useful parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>-t $name</td>
<td>Give a name to the image (tag)</td>
</tr>
</tbody>
</table>
<p>Remove an image: <code>$ docker rmi $image_ID_or_name</code></p>
<h2 id="containers">Containers</h2>
<p>List all containers (running): <code>$ docker ps</code></p>
<p>List all containers (running and stopped): <code>$ docker ps -a</code></p>
<p>Create (Run) Container from an Image: <code>$ docker run $image_ID_or_name $initial_command</code>
, where $initial_command is the command executed on the container right after it is run, (e.g. /bin/bash), and overrides the one specified in the Dockerfile with CMD.</p>
<p>Useful parameters:</p>
<table>
<thead>
<tr>
<th>Parameter (with example)</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>--name my_container</td>
<td>Give a name to the container</td>
</tr>
<tr>
<td>-v /home/user/src:/var/www/html</td>
<td>Mount a volume (share directory with the host)</td>
</tr>
<tr>
<td>-p 8080:80</td>
<td>Maps the port of the host to the port of the container</td>
</tr>
<tr>
<td>-d</td>
<td>Detached mode - run in the background</td>
</tr>
<tr>
<td>-it</td>
<td>Allocates to the container a valid pseudo-tty and keeps stdin connected</td>
</tr>
<tr>
<td>--env VAR1=value</td>
<td>Sets environment variable to the container</td>
</tr>
<tr>
<td>--restart=always</td>
<td>Always restarts the container if it stops</td>
</tr>
<tr>
<td>--link another_container</td>
<td>Links containers together. Docker updates the /etc/hosts file in the one container to add "another_container" as a local hostname pointing to the other container. However this method is not recommended. It is better to define a docker Network (see below).</td>
</tr>
<tr>
<td>--network=mynetwork</td>
<td>Places the container in a user defined network (see Network section below). Using user defined networks you have an internal name resolution at your disposal. You can call other containers on the same user defined network by name.</td>
</tr>
</tbody>
</table>
<p>There are also a lot more parameters, allowing you to control resource allocation to the container,
networking etc. For more check <a href="https://docs.docker.com/engine/reference/commandline/run/">this</a> page.</p>
<p>Stop Container: <code>$ docker stop $container_ID_or_name</code></p>
<p>Start Container: <code>$ docker start $container_ID_or_name</code> (with -a, it starts attached.)</p>
<p>Remove container: <code>$ docker rm $container_ID_or_name</code></p>
<p>Execute a command to a running container (example): <code>$ docker exec -it $container_ID_or_name echo "Hello from inside"</code>.</p>
<p>Attach local standard input, output, and error streams to a running container: <code>$ docker attach $container_ID_or_name</code>. If you do not see the shell, click the up arrow. To detach and leave running use CTRL+p then CTRL+q.</p>
<p>Create a new image from a container’s changes: <code>$ docker commit $container_ID_or_name $new_image_name</code></p>
<h2 id="network">Network</h2>
<p>Create a network: <code>$ docker network create $networkname</code></p>
<p>List available networks: <code>$ docker network ls</code></p>
<p>Remove network: <code>$ docker network rm $networkname</code></p>
<!--
## Useful links:
- https://stackoverflow.com/questions/29957653/docker-container-not-starting-docker-start
- https://stackoverflow.com/questions/26153686/how-do-i-run-a-command-on-an-already-existing-docker-container
- https://deis.com/blog/2016/connecting-docker-containers-1/
- https://deis.com/blog/2016/connecting-docker-containers-2/
--></div>
			<div class="col-md-2"></div>
		</div>
	</div>

	<!-- Footer -->
	<footer class="footer">
		<div class="container">
			<span class="text-muted">Generated with
				<a href="#">Blossom</a>
			</span>
		</div>
	</footer>

	<!-- JS includes for bootstrap 4 -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

	<!-- Highlight.js includes -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/rust.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/bash.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/x86asm.min.js"></script>
	<script>
		 hljs.initHighlightingOnLoad();
	</script>

	<!-- Custom visual additions -->
	<script>
		$(document).ready(function () {
			// required to help tables and blockquotes work with bootstrap
			$('table').addClass('table');
			$('blockquote').addClass('blockquote');
	
			// adding space before and after headers.
			$('h1').before('<br>').after('<br>');
			$('h2').before('<br>').after('<br>');
			$('h3').before('<br>').after('<br>');
			$('h4').before('<br>').after('<br>');

			// make images centered and responsive
			$('img').addClass('mx-auto d-block img-fluid');

		});
	</script>



</body></html>